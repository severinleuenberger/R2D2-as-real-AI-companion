#!/bin/bash
# R2D2 Face Recognition & Audio Notification Test Procedure
# This script guides you through testing the system

echo ""
echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘                                                                  â•‘"
echo "â•‘  ğŸ¤– R2D2 FACE RECOGNITION & AUDIO NOTIFICATION TEST PROCEDURE   â•‘"
echo "â•‘                                                                  â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "This test will verify that your R2D2 recognizes your face and beeps."
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ“‹ TEST SETUP"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "You'll need THREE TERMINALS:"
echo ""
echo "Terminal 1: Face Recognition Pipeline"
echo "  â†’ Camera & face detection"
echo "  â†’ Run: cd ~/dev/r2d2/ros2_ws && source install/setup.bash"
echo "         ros2 launch r2d2_bringup r2d2_camera_perception.launch.py enable_face_recognition:=true"
echo ""
echo "Terminal 2: Audio Notification Service (already running)"
echo "  â†’ Status: sudo systemctl status r2d2-audio-notification.service"
echo "  â†’ Logs: sudo journalctl -u r2d2-audio-notification.service -f"
echo ""
echo "Terminal 3: Real-time Monitor (THIS TERMINAL)"
echo "  â†’ Run: python3 ~/dev/r2d2/monitor_face_recognition.py"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ¬ TEST PROCEDURE"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "Step 1: Start Terminal 1 - Face Recognition Pipeline"
echo "        Wait for it to initialize (30 seconds)"
echo ""
echo "Step 2: In THIS terminal, start the monitor:"
echo "        python3 ~/dev/r2d2/monitor_face_recognition.py"
echo ""
echo "Step 3: Run through the test scenarios:"
echo ""
echo "  TEST A: Face Recognition"
echo "    â”œâ”€ Position yourself in front of camera"
echo "    â”œâ”€ You should see: 'âœ… severin' in the monitor"
echo "    â””â”€ You should HEAR: ğŸ”Š Single beep (400 Hz, 0.5 sec)"
echo ""
echo "  TEST B: No Face (Unknown)"
echo "    â”œâ”€ Turn away from camera or cover it"
echo "    â”œâ”€ You should see: 'â“ unknown' in the monitor"
echo "    â””â”€ No beep (expected behavior)"
echo ""
echo "  TEST C: Loss Alert"
echo "    â”œâ”€ Start with face recognized (TEST A)"
echo "    â”œâ”€ Turn away for 5+ seconds"
echo "    â”œâ”€ Wait for confirmation..."
echo "    â”œâ”€ You should HEAR: ğŸ””ğŸ”” Double beep (loss alert)"
echo "    â””â”€ Monitor should show transition to 'â“ unknown'"
echo ""
echo "  TEST D: Recovery"
echo "    â”œâ”€ Show your face again after loss alert"
echo "    â”œâ”€ You should see: 'âœ… severin' in monitor"
echo "    â””â”€ You should HEAR: ğŸ”Š Single beep (welcome back!)"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ“Š EXPECTED OUTPUT IN MONITOR"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "Real-time status line (updates every frame):"
echo "  10:14:45.234 | Face Recognition: âœ… severin"
echo ""
echo "Audio events (appear on new line when triggered):"
echo "  10:14:47.892 | ğŸ”Š Audio Event: ğŸ‰ Recognized severin!"
echo "  10:14:53.456 | ğŸ”Š Audio Event: âŒ severin lost (confirmed)"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ¯ QUICK START"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "Run this NOW to start the monitor:"
echo ""
echo "  python3 ~/dev/r2d2/monitor_face_recognition.py"
echo ""
echo "Then in another terminal, start face recognition:"
echo ""
echo "  cd ~/dev/r2d2/ros2_ws && source install/setup.bash"
echo "  ros2 launch r2d2_bringup r2d2_camera_perception.launch.py enable_face_recognition:=true"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
